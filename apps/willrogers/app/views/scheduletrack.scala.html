@(tdList : Seq[com.klout.satisfaction.TrackDescriptor], scList: Seq[com.klout.satisfaction.TrackDescriptor] , messageOpt : Option[String] = None)


@import helper._
@import scala.collection.JavaConversions._
@import com.klout.satisfaction._
@import com.klout.satisfaction.Schedulable
@import com.klout.satisfaction.engine._
@import com.klout.satisfaction.engine.actors._
@import models.HtmlUtil

@main( s"Satisfaction Scheduler Status" ) {
	<script>
	$(function() {
	    $( document ).tooltip();
	    $('.scheduleRule').prop('selectedIndex', -1);
	  });
	</script>
	
		<h1> Scheduler</h1>
	@messageOpt match {
	  case Some(message) => {
	    <div id="messageBox">
	    <table>
	     <tr><td>@message</td></tr>
	    </table>
	    </div>
	  }
	  case None => {
	  }
    }
		<table>
		<table>
		<h2> Scheduled Tracks</h2>
		<table>
			<thead>
				<td> Track </td>
				<td> Track User </td>
				<td> Track Variant </td>
				<td> Track Version </td>
				<td> Status </td>
				<td> Type (cron vs rec) </td>
				<td> schedule </td>
				<td> readable schedule </td>
				<td> scheduled on </td>
				<td> recent run </td>
				<td> unschedule <td>
			</thead>
			@scList.map { td =>
				<tr>
					<td>@td.trackName </td>
					<td>@td.trackName</td>
  	                <td>@td.forUser</td>
  	                <td>@td.variant</td>
  	                <td>@td.version</td>
					<td>- </td>
					<td>scheduleString </td>
					<td>- </td>
					<td>- </td>
					<td>- </td>
					<td>- </td>
					<td><button id ="unscheduleButton" onClick="window.location.href='/unscheduleonejob/@td.trackName/@td.forUser/@td.version'">Unschedule</button></td>
				</tr>
				}

		</table>
		<h2> Unscheduled Tracks</h2>
		<table>
			<thead>
				<td> Track </td>
				<td> Status </td>
				<td>Scheduling Option</td>
			</thead>
			@tdList.map { td =>
				<tr>
					<td>@td.trackName</td>
					<td>"NO!"</td>	
					<td>
						<form  method = "post" action="scheduletrack/@td.trackName/@td.forUser/@td.version">
							<b>Type</b>: <input type="radio" name="rule" value="cron" checked="checked">Cronable
									<input type="radio" name="rule" value="recur">Recurring
									<input type="radio" name="rule" value="constantly">Constantly
							<b>Pattern</b>:<input type="text" name="pattern" title="If Recurring: format must be standard: PyYmMwWdDThHmMsS">
							<b>Stoppable</b>:<input type="radio" name="stoppable" value="no" checked="checked">No
										<input type="radio" name="stoppable" value="pause">pause
										<input type="radio" name="stoppable" value="die">kill
		
							<input type="submit">
						</form>
					</td>
				</tr>
				}
		</table>

  

	}